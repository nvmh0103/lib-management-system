<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Borrow History - Hệ thống quản lý thư viện</title>
</head>

<body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f4f4f4;">
    <header style="background-color: #0275d8; color: white; padding: 20px; text-align: center;">
        <h1 style="margin: 0;">Hệ thống quản lý thư viện</h1>
        {{#if username}}
        <p>Welcome, {{username}}! <a href="/logout"
                style="color: white; background-color: #ff4136; padding: 5px 10px; text-decoration: none; border-radius: 5px;">Log
                Out</a></p>
        {{else}}
        <p><a href="/login" style="color: white;">Login</a></p>
        {{/if}}
    </header>
    <nav style="background-color: #f8f9fa; padding: 10px; text-align: center;">
        <a href="/" style="margin-right: 15px; text-decoration: none; color: #0275d8;">Home</a>
        <a href="#" style="margin-right: 15px; text-decoration: none; color: #0275d8;">About</a>
        <a href="#" style="text-decoration: none; color: #0275d8;">Contact</a>
    </nav>
    <main style="padding: 20px;">
        <section>
            <h2>Book Borrow History</h2>
            <p>View the history of all borrowed books.</p>
            <form action="/searchBorrowHistory" method="get"
                style="display: flex; justify-content: center; align-items: center; gap: 10px;">
                <input type="text" name="email" placeholder="Search by email" required
                    style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
                <button type="submit"
                    style="padding: 10px 20px; border-radius: 5px; border: none; background-color: #007bff; color: white; cursor: pointer;">Search</button>
            </form>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #f2f2f2;">
                        <th style="border: 1px solid #ddd; padding: 8px;">Book Title</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Borrower</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Borrow Date</th>
                        <th style="border: 1px solid #ddd; padding: 8px;">Return Date</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each histories}}
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">{{this.Book.title}}</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">{{this.User.email}}</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">{{this.borrowDate}}</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">{{this.returnDate}}</td>
                        <td>
                            {{#unless returnDate}}
                        <td><a href="/return/{{this.Book.isbn}}"
                                style="color: white; background-color: #ff4136; padding: 5px 10px; text-decoration: none; border-radius: 5px;">Return</a>
                        </td>
                        {{else}}
                        <td><span
                                style="color: grey; background-color: #cccccc; padding: 5px 10px; text-decoration: none; border-radius: 5px;">Return</span>
                        </td>
                        {{/unless}}
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </section>
    </main>
    <footer
        style="background-color: #0275d8; color: white; text-align: center; padding: 10px; position: fixed; bottom: 0; width: 100%;">
        <p>&copy; 2024 Library Management System</p>
    </footer>
</body>

</html>